<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="RiftRays&#39;s Blog">
<meta name="description" content="年轻且优秀 积极且颓废">
<meta name="theme-color" content="#000">
<title>SonatypeNexus | RiftRays&#39;s Blog</title>
<link rel="shortcut icon" href="/favicon.ico?v=1713170724295">
<link rel="stylesheet" href="/media/css/pisces.css">
<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link
  href="//fonts.loli.net/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/pojoaque.css"
  rel="stylesheet">

<script src="https://jsdelivr.codeqihan.com/npm/pace-js@1.0.2/pace.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/black/pace-theme-center-atom.css" rel="stylesheet" />

<link rel="stylesheet" href="/styles/main.css">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/media/js/jquery.js"></script>
<script src="/media/hljs/highlight.js"></script>
<script src="https://jsdelivr.codeqihan.com/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://jsdelivr.codeqihan.com/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://jsdelivr.codeqihan.com/npm/katex@0.11.1/dist/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src="https://jsdelivr.codeqihan.com/npm/katex@0.11.1/dist/katex.min.js"
  integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://jsdelivr.codeqihan.com/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
  integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
  onload="renderMathInElement(document.body);"></script>






  <meta name="description" content="SonatypeNexus" />
  <meta name="keywords" content="Maven" />
</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    <style>
.gridea-search-input{
    height: 30px;
    width: 200px;
    box-sizing: border-box;
    padding: 0 15px 0 30px;
    border: 1px solid #e3e3e3;
    border-radius: 15px;
    color: #273849;
    outline: none;
    transition: border-color 0.2s ease;
    background: #fff url("data:image/svg+xml,%3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='80' height='65'%3E%3Cpath d='M936.265 854.34L757.43 675.52c46.499-63.168 74.02-141.125 74.02-225.398 0-210.1-170.945-381.039-381.055-381.039S69.346 240.023 69.346 450.122c0 210.105 170.94 381.043 381.049 381.043 84.275 0 162.235-27.52 225.405-74.019l178.833 178.819c11.27 11.265 26.036 16.903 40.813 16.903 14.777 0 29.543-5.638 40.819-16.903 22.536-22.546 22.536-59.09 0-81.625zM163.14 450.122C163.14 291.733 292 162.87 450.396 162.87s287.261 128.862 287.261 287.252c0 158.39-128.867 287.252-287.261 287.252S163.14 608.512 163.14 450.122z' fill='%23C4C4C4'/%3E%3C/svg%3E") 8px 7px no-repeat;
    background-size: 20px;
    vertical-align: middle !important;
}
.gridea-search-input:focus {
  border-color: #666666;
  right: 0;
}
</style>

<div class="pisces">
  <header class="header  ">
    <div class="blog-header box-shadow-wrapper bg-color " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="brand">
              <span>RiftRays&#39;s Blog</span>
            </a>  
          
        </div>
        
          <p class="subtitle">年轻且优秀 积极且颓废</p>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="https://riftrays.github.io" target="_self">
                  <i class="fa fa-globe"></i> 首页
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="https://riftrays.github.io/archives" target="_self">
                  <i class="fa fa-archive"></i> 笔记
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="https://riftrays.github.io/tags" target="_self">
                  <i class="fa fa-tags"></i> 标签
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-address-book"></i> 友链
                  
                </a>
              </li>
            
          
          
            <li id="fa_search" class="nav-item">
				<a href="javascript:void(0);">
					<span class="language" data-lan="search">
						<div class="gridea-search-div">
							<form id="gridea-search-form" action="https://riftrays.github.io/search/">
								<input class="gridea-search-input" autocomplete="off" spellcheck="false" name="q"/>
							</form>
						</div>
					</span>
				</a>
			</li>
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout pisces ">
      <div class="section-layout-wrapper">
        

<div class="sidebar">
  
    <div class="sidebar-box box-shadow-wrapper bg-color right-motion" id="sidebar">
      
        <div class="post-list-sidebar">
          <div class="sidebar-title">
            <span id="tocSideBar" class="sidebar-title-item sidebar-title-active language" data-lan="index">文章目录</span>
            <span id="metaSideBar" class="sidebar-title-item language" data-lan="preview">站点概览</span>
          </div>
        </div>
      
      <div class="sidebar-body pisces" id="sidebar_body">
        
          
            <div class="post-side-meta" id="post_side_meta">
              
<div class="sidebar-wrapper box-shadow-wrapper bg-color">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">RiftRays</p>
    
    <div class="site-description right-motion">
      
        <p id="binft">年轻且优秀 积极且颓废</p>
      
    </div>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">24</span>
        <span class="site-item-stat-name language" data-lan="article">文章</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">11</span>
        <span class="site-item-stat-name language" data-lan="tag">标签</span>
      </a>
    </div>
  </div>
  
    
  
  
    <div class="sidebar-item sidebar-item-social">
      <div class="social-item">
        
          
            <a href="https://github.com/RiftRays">
              <i class="fa fa-github-alt" title="GitHub"></i>
            </a>
          
            <a href="mailto:RiftRays@gmail.com">
              <i class="fa fa-envelope" title="Gmail"></i>
            </a>
          
            <a href="">
              <i class="fa fa-comments" title="WeChat"></i>
            </a>
          
            <a href="">
              <i class="fa fa-qq" title="QQ"></i>
            </a>
          
        
        
      </div>
    </div>
  



  <div style="width: 100%; position: relative;">
    <canvas id="canvasDiyBlock" style="width:100%;">当前浏览器不支持canvas，请更换浏览器后再试</canvas>
    <script src="/media/js/magic/clock.js"></script>
  </div>

</div>
            </div>
            <div class="post-toc sidebar-body-active" id="post_toc" style="opacity: 1;">
              <div class="toc-box right-motion">
  <div class="toc-wrapper auto-number auto"
    id="toc_wrapper">
    <ul class="markdownIt-TOC">
<li><a href="#%E7%A7%81%E6%9C%8D">私服</a>
<ul>
<li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li>
<li><a href="#%E4%BC%98%E7%82%B9">优点</a></li>
<li><a href="#%E7%A7%81%E6%9C%8D%E4%BB%93%E5%BA%93%E5%88%86%E7%B1%BB">私服仓库分类</a>
<ul>
<li><a href="#proxy-repository%E4%BB%A3%E7%90%86%E4%BB%93%E5%BA%93">Proxy Repository（代理仓库）</a></li>
<li><a href="#hosted-repository%E6%89%98%E7%AE%A1%E4%BB%93%E5%BA%93">Hosted Repository（托管仓库）</a></li>
<li><a href="#group-repository%E7%BB%84%E5%90%88%E4%BB%93%E5%BA%93">Group Repository（组合仓库）</a></li>
<li><a href="#snapshot-repository%E5%BF%AB%E7%85%A7%E4%BB%93%E5%BA%93">Snapshot Repository（快照仓库）</a></li>
</ul>
</li>
<li><a href="#%E6%90%AD%E5%BB%BAmaven%E7%A7%81%E6%9C%8D">搭建Maven私服</a>
<ul>
<li><a href="#%E6%AD%A5%E9%AA%A4%E4%B8%80%E4%B8%8B%E8%BD%BDsonatype-nexus">步骤一：下载Sonatype Nexus</a></li>
<li><a href="#%E6%AD%A5%E9%AA%A4%E4%BA%8C%E5%AE%89%E8%A3%85sonatype-nexus">步骤二：安装Sonatype Nexus</a></li>
<li><a href="#%E6%AD%A5%E9%AA%A4%E4%B8%89%E8%AE%BF%E9%97%AEsonatype-nexus%E6%8E%A7%E5%88%B6%E5%8F%B0">步骤三：访问Sonatype Nexus控制台</a></li>
<li><a href="#%E6%AD%A5%E9%AA%A4%E5%9B%9B%E9%85%8D%E7%BD%AEmaven%E7%A7%81%E6%9C%8D">步骤四：配置Maven私服</a></li>
<li><a href="#%E6%AD%A5%E9%AA%A4%E4%BA%94%E9%85%8D%E7%BD%AEmaven%E9%A1%B9%E7%9B%AE%E4%BD%BF%E7%94%A8%E7%A7%81%E6%9C%8D">步骤五：配置Maven项目使用私服</a></li>
<li><a href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81">示例代码</a></li>
</ul>
</li>
<li><a href="#nexus%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE">Nexus基础配置</a>
<ul>
<li><a href="#%E4%BF%AE%E6%94%B9%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF">修改基础配置信息</a>
<ul>
<li><a href="#%E4%BF%AE%E6%94%B9nexus%E7%AE%A1%E7%90%86%E5%91%98%E5%AF%86%E7%A0%81">修改Nexus管理员密码</a></li>
<li><a href="#%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3">更改默认端口</a></li>
<li><a href="#%E9%85%8D%E7%BD%AEssl%E8%AF%81%E4%B9%A6">配置SSL证书</a></li>
</ul>
</li>
<li><a href="#%E4%BF%AE%E6%94%B9%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E8%A1%8C%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF">修改服务器运行配置信息</a>
<ul>
<li><a href="#%E8%B0%83%E6%95%B4jvm%E5%86%85%E5%AD%98%E5%8F%82%E6%95%B0">调整JVM内存参数</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E8%BF%90%E8%A1%8C%E6%97%B6%E7%94%A8%E6%88%B7">配置运行时用户</a></li>
<li><a href="#%E6%9B%B4%E6%94%B9%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE">更改数据存储位置</a></li>
</ul>
</li>
<li><a href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E7%AE%A1%E7%90%86maven%E4%BB%93%E5%BA%93">创建和管理Maven仓库</a>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%90%86%E4%BB%93%E5%BA%93">创建代理仓库</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E6%89%98%E7%AE%A1%E4%BB%93%E5%BA%93">创建托管仓库</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E7%BB%84%E5%90%88%E4%BB%93%E5%BA%93">创建组合仓库</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E5%BF%AB%E7%85%A7%E4%BB%93%E5%BA%93">创建快照仓库</a></li>
</ul>
</li>
<li><a href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E5%92%8C%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE">权限管理和用户配置</a></li>
<li><a href="#%E4%BB%93%E5%BA%93%E8%AE%BF%E9%97%AE%E7%AD%96%E7%95%A5%E9%85%8D%E7%BD%AE">仓库访问策略配置</a>
<ul>
<li><a href="#%E4%BB%A3%E7%90%86%E4%BB%93%E5%BA%93%E8%AE%BF%E9%97%AE%E7%AD%96%E7%95%A5">代理仓库访问策略</a></li>
<li><a href="#%E6%89%98%E7%AE%A1%E4%BB%93%E5%BA%93%E8%AE%BF%E9%97%AE%E7%AD%96%E7%95%A5">托管仓库访问策略</a></li>
<li><a href="#%E7%BB%84%E5%90%88%E4%BB%93%E5%BA%93%E8%AE%BF%E9%97%AE%E7%AD%96%E7%95%A5">组合仓库访问策略</a></li>
<li><a href="#%E5%BF%AB%E7%85%A7%E4%BB%93%E5%BA%93%E8%AE%BF%E9%97%AE%E7%AD%96%E7%95%A5">快照仓库访问策略</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E8%B5%84%E6%BA%90%E4%B8%8A%E4%BC%A0%E4%B8%8E%E4%B8%8B%E8%BD%BD">资源上传与下载</a>
<ul>
<li><a href="#%E6%A6%82%E8%BF%B0">概述</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E4%B8%8E%E8%AE%A4%E8%AF%81">创建用户与认证</a>
<ul>
<li><a href="#%E8%AE%BE%E7%BD%AE%E8%AE%A4%E8%AF%81%E4%BF%A1%E6%81%AF%E6%AD%A5%E9%AA%A4">设置认证信息步骤</a></li>
<li><a href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0">代码实现</a></li>
</ul>
</li>
<li><a href="#%E8%B5%84%E6%BA%90%E4%B8%8A%E4%BC%A0%E4%B8%8A%E4%BC%A0%E6%9E%84%E4%BB%B6">资源上传（上传构件）</a>
<ul>
<li><a href="#maven%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE">Maven项目配置</a></li>
<li><a href="#%E4%B8%8A%E4%BC%A0%E6%9E%84%E4%BB%B6">上传构件</a></li>
</ul>
</li>
<li><a href="#%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD%E4%B8%8B%E8%BD%BD%E6%9E%84%E4%BB%B6">资源下载（下载构件）</a>
<ul>
<li><a href="#maven%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE-2">Maven项目配置</a></li>
<li><a href="#%E4%B8%8B%E8%BD%BD%E6%9E%84%E4%BB%B6">下载构件</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
</div>

<script>

  let lastTop = 0, lList = [], hList = [], postBody, lastIndex = -1;
  let active = 'active-show', activeClass = 'active-current';
  let tocWrapper = document.querySelector('#toc_wrapper');
  let tocContent = tocWrapper.children[0];
  let autoNumber = tocWrapper && tocWrapper.classList.contains('auto-number');

  function addTocNumber(elem, deep) {
    if (!elem) {
      return;
    }
    let prop = elem.__proto__;

    if (prop === HTMLUListElement.prototype) {
      for (let i = 0; i < elem.children.length; i++) {
        addTocNumber(elem.children[i], deep + (i + 1) + '.');
      }
    } else if (prop === HTMLLIElement.prototype) {
      // 保存li元素
      if (elem.children[0] && elem.children[0].__proto__ === HTMLAnchorElement.prototype) {
        lList.push(elem);
      }
      for (let i = 0; i < elem.children.length; i++) {
        let cur = elem.children[i];
        if (cur.__proto__ === HTMLAnchorElement.prototype) {
          if (autoNumber) {
            cur.text = deep + ' ' + cur.text;
          }
        } else if (cur.__proto__ === HTMLUListElement.prototype) {
          addTocNumber(cur, deep);
        }
      }
    }
  }

  function removeParentActiveClass() {
    let parents = tocContent.querySelectorAll('.' + active)
    parents.forEach(function (elem) {
      elem.classList.remove(active);
    });
  }

  function addActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.add(activeClass);
    }
  }

  function removeActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.remove(activeClass);
    }
  }

  function addActiveLiElemment(elem, parent) {
    if (!elem || elem === parent) {
      return;
    } else {
      if (elem.__proto__ === HTMLLIElement.prototype) {
        elem.classList.add(active);
      }
      addActiveLiElemment(elem.parentElement, parent);
    }
  }

  function showToc() {
    if (tocWrapper) {
      postBody = document.querySelector('#post_body');
      for (let i = 0; i < postBody.children.length; i++) {
        if (postBody.children[i].__proto__ === HTMLHeadingElement.prototype) {
          hList.push(postBody.children[i]);
        }
      }
      if (tocWrapper.classList.contains('compress')) {
        tocContent.classList.add('closed');
      } else if (tocWrapper.classList.contains('no_compress')) {
        tocContent.classList.add('expanded');
      } else {
        if (hList.length > 10) {
          active = 'active-hidden'
          tocContent.classList.add('closed');
        } else {
          tocContent.classList.add('expanded');
        }
      }
    }
  }

  (function () {
    // 处理不是从#一级标题开始目录
    if (tocContent.children.length === 1 && tocContent.children[0].__proto__ === HTMLLIElement.prototype) {
      let con = tocContent.children[0].children[0];
      tocContent.innerHTML = con.innerHTML;
    }
    let markdownItTOC = document.querySelector('.markdownIt-TOC');
    let innerHeight = window.innerHeight;
    markdownItTOC.style = `max-height: ${innerHeight - 80 > 0 ? innerHeight - 80 : innerHeight}px`
    addTocNumber(tocContent, '');
  })();

  document.addEventListener('scroll', function (e) {
    if (lList.length <= 0) {
      return;
    }
    let scrollTop = document.scrollingElement.scrollTop + 10;
    let dir;

    if (lastTop - scrollTop > 0) {
      dir = 'up';
    } else {
      dir = 'down';
    }

    lastTop = scrollTop;
    if (scrollTop <= 0) {
      if (lastIndex >= 0 && lastIndex < hList.length) {
        lList[lastIndex].classList.remove(activeClass);
      }
      return;
    }

    let current = 0, hasFind = false;
    for (let i = 0; i < hList.length; i++) {
      if (hList[i].offsetTop > scrollTop) {
        current = i;
        hasFind = true;
        break;
      }
    }
    if (!hasFind && scrollTop > lList[lList.length - 1].offsetTop) {
      current = hList.length - 1;
    } else {
      current--;
    }
    if (dir === 'down') {
      if (current > lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex)
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    } else {
      if (current < lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex);
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    }
  });


  window.addEventListener('load', function () {
    showToc();
    document.querySelector('#sidebar').style = 'display: block;';
    tocWrapper.classList.add('toc-active');
    setTimeout(function () {
      if ("createEvent" in document) {
        let evt = document.createEvent("HTMLEvents");
        evt.initEvent("scroll", false, true);
        document.dispatchEvent(evt);
      }
      else {
        document.fireEvent("scroll");
      }
    }, 500)
  })

</script>
            </div>
          
        
      </div>
    </div>
  
</div>
<script>
  const SIDEBAR_TITLE_ACTIVE = 'sidebar-title-active';
  const SIDEBAR_BODY_ACTIVE = 'sidebar-body-active';
  const SLIDE_UP_IN = 'slide-up-in';

  let sidebar = document.querySelector('#sidebar'),
  tocSideBar = document.querySelector('#tocSideBar'),
  metaSideBar = document.querySelector('#metaSideBar'),
  postToc = document.querySelector('#post_toc'),
  postSiteMeta = document.querySelector('#post_side_meta'),
  sidebarTitle = document.querySelector('.sidebar-title'),
  sidebarBody = document.querySelector('#sidebar_body');

  tocSideBar && tocSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  metaSideBar && metaSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  function toggleSidebar(e) {
    let currentTitle = document.querySelector("."+SIDEBAR_TITLE_ACTIVE);
    if (currentTitle == e.srcElement) {
      return ;
    }
    let current, showElement, hideElement;
    if (e.srcElement == metaSideBar) {
      showElement = postSiteMeta;
      hideElement = postToc;
    } else if (e.srcElement == tocSideBar){
      showElement = postToc;
      hideElement = postSiteMeta;
    }
    currentTitle.classList.remove(SIDEBAR_TITLE_ACTIVE);
    e.srcElement.classList.add(SIDEBAR_TITLE_ACTIVE);

    jQuery.Velocity(hideElement, 'stop');
    jQuery.Velocity(hideElement, 'transition.slideUpOut', {
      display: 'none',
      duration: 200,
      complete: function () {
        jQuery.Velocity(showElement, 'transition.slideDownIn', {
          duration: 200
        });
      }
    })
    hideElement.classList.remove(SIDEBAR_BODY_ACTIVE);
    showElement.classList.add(SIDEBAR_BODY_ACTIVE);
  }

  postToc && postToc.addEventListener('transitionend', function() {
    this.classList.remove(SLIDE_UP_IN);
  });

  if (sidebarBody) {
    if (sidebarBody.classList.contains('pisces') || sidebarBody.classList.contains('gemini')) {
      let hasFix = false;
      let scrollEl = document.querySelector('.main-continer');
      let limitTop = document.querySelector('#nav_ul').children.length * 42 + 162;
      window.addEventListener('scroll', function(e) {
        if (document.scrollingElement.scrollTop >= limitTop) {
          if (!hasFix) {
            sidebar.classList.add('sidebar-fixed');
            hasFix = true;
          }
        } else {
          if (hasFix) {
            sidebar.classList.remove('sidebar-fixed');
            hasFix = false;
          }
        }
      });
    }
  }
  
</script>
        <div class="section-box box-shadow-wrapper">
          <div class="section bg-color post post-page">
            <section class="post-header">
  <h1 class="post-title">
    <a class="post-title-link" href="https://riftrays.github.io/6Dq1YTrSe/"> SonatypeNexus </a>
  </h1>
  <div class="post-meta">
    
    <span class="meta-item pc-show">
      <i class="fa fa-calendar-o"></i>
      <span class="language" data-lan="publish">发布于</span>
      <span class="publish-time" data-t="2022-01-02 19:58:56">2022-01-02 19:58:56</span>
      <span class="post-meta-divider pc-show">|</span>
    </span>
    
    <span class="meta-item">
      <i class="fa fa-folder-o"></i>
      <span class="pc-show language" data-lan="category-in">标签:</span>
       
      <a href="https://riftrays.github.io/tag-Maven/">
        <span>Maven</span>
      </a>
       
    </span>
    <span class="post-meta-divider">|</span>
    
    <span class="meta-item">
      <i class="fa fa-clock-o"></i>
      <span
        >27<span class="language" data-lan="minute"
          >分钟</span
        ></span
      >
    </span>
    <span class="meta-item">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-file-word-o"></i>
      <span
        >6668<span class="pc-show language" data-lan="words"
          >字数</span
        ></span
      >
    </span>
      
    <span
      id="/6Dq1YTrSe/"
      data-flag-title="SonatypeNexus"
      class="meta-item pc-show leancloud_visitors"
    >
      <span class="post-meta-divider">|</span>
      <i class="fa fa-eye"></i>
      <span
        ><span class="language" data-lan="view">浏览量:</span>:<span
          class="leancloud-visitors-count"
        ></span
      ></span>
    </span>
    
  </div>
</section>

            <div class="post-body next-md-body" id="post_body">
              <h1 id="私服">私服</h1>
<h2 id="简介">简介</h2>
<p>Maven私服（Maven Repository Manager）是一种用于管理和缓存Maven构建依赖的工具。它充当了本地和中央远程仓库之间的中间层，为开发团队提供了更高效、可靠的构建过程。私服可以帮助团队在内部维护和共享构建依赖，从而加快项目构建速度，并减轻对公共中央仓库的依赖，提高项目构建的可靠性。</p>
<img src="https://jsd.cdn.zzko.cn/gh/VincentAstor/Vincent@master/Maven/image-20230721165702245.png" alt="image-20230721165702245" style="zoom:50%;" />
<h2 id="优点">优点</h2>
<ol>
<li>
<p><strong>加快构建速度</strong>：私服允许团队在内部缓存项目所需的依赖，减少了对外部中央仓库的访问，从而提高了构建速度。</p>
</li>
<li>
<p><strong>离线构建</strong>：私服允许团队在没有网络连接时继续构建项目，因为所需的依赖已经被缓存在私服中。</p>
</li>
<li>
<p><strong>版本控制</strong>：私服可以确保项目使用特定版本的依赖，从而提高项目的稳定性。</p>
</li>
<li>
<p><strong>安全性</strong>：私服允许团队在内部管理构建依赖，减少了对外部不可信仓库的依赖，提高了构建的安全性。</p>
</li>
</ol>
<h2 id="私服仓库分类">私服仓库分类</h2>
<p>Maven私服仓库分类，主要是指根据存储内容和访问权限将私服仓库划分为不同的类型。一般来说，私服仓库可以分为以下几类：</p>
<h3 id="proxy-repository代理仓库">Proxy Repository（代理仓库）</h3>
<p>代理仓库是私服与公共中央仓库之间的中间层。它可以缓存从公共中央仓库下载的依赖，从而在项目构建过程中加快依赖下载速度，并降低对中央仓库的网络依赖。代理仓库会自动向上游中央仓库发起请求，并将下载的依赖保存在本地，以便后续项目构建时直接从私服仓库获取依赖。</p>
<p>代码示例：创建一个代理仓库的配置，在项目的<code>pom.xml</code>文件中添加如下代码：</p>
<pre><code class="language-xml">&lt;project&gt;
    &lt;!-- 其他配置 --&gt;

    &lt;repositories&gt;
        &lt;!-- 定义代理仓库 --&gt;
        &lt;repository&gt;
            &lt;id&gt;maven-central-proxy&lt;/id&gt;
            &lt;url&gt;http://localhost:8081/nexus/repository/maven-central/&lt;/url&gt;
            &lt;!-- 设置为true表示该仓库是代理仓库 --&gt;
            &lt;releases&gt;
                &lt;enabled&gt;true&lt;/enabled&gt;
            &lt;/releases&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;true&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;

    &lt;!-- 其他配置 --&gt;
&lt;/project&gt;
</code></pre>
<p>在上述配置中，<code>maven-central-proxy</code>是代理仓库的ID，<code>http://localhost:8081/nexus/repository/maven-central/</code>是代理仓库的URL地址。</p>
<h3 id="hosted-repository托管仓库">Hosted Repository（托管仓库）</h3>
<p>托管仓库是私服中用于存储内部开发项目的依赖的仓库。它允许开发团队发布自己的Maven项目，以便其他项目可以访问和使用这些依赖。在托管仓库中，开发者可以将自己的项目构件发布到私服，并且其他项目可以通过私服获取这些构件。</p>
<p>代码示例：在Sonatype Nexus控制台中创建一个托管仓库。</p>
<ul>
<li>在Sonatype Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Repositories&quot;。</li>
<li>在右侧的&quot;Repositories&quot;页面，点击&quot;Create Repository&quot;。</li>
<li>选择&quot;Maven (Hosted)&quot;作为仓库类型，然后按照向导设置仓库的属性。</li>
</ul>
<h3 id="group-repository组合仓库">Group Repository（组合仓库）</h3>
<p>组合仓库是私服中的虚拟仓库，它可以将多个代理仓库和托管仓库组合在一起，并将它们呈现为单一的仓库。组合仓库允许开发者在项目中只配置一个仓库，但实际上可以从多个实际仓库中获取依赖。</p>
<p>代码示例：在Sonatype Nexus控制台中创建一个组合仓库。</p>
<ul>
<li>在Sonatype Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Repositories&quot;。</li>
<li>在右侧的&quot;Repositories&quot;页面，点击&quot;Create Repository&quot;。</li>
<li>选择&quot;Maven (Group)&quot;作为仓库类型，然后按照向导设置组合仓库的属性，并选择包含的实际仓库。</li>
</ul>
<h3 id="snapshot-repository快照仓库">Snapshot Repository（快照仓库）</h3>
<p>快照仓库用于存储项目的快照版本，即开发过程中的不稳定版本。快照版本通常用于频繁发布和测试最新的功能和改进，而不用每次都发布稳定的版本。快照仓库允许开发者发布和获取这些不稳定版本的依赖。</p>
<p>代码示例：在Sonatype Nexus控制台中创建一个快照仓库。</p>
<ul>
<li>在Sonatype Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Repositories&quot;。</li>
<li>在右侧的&quot;Repositories&quot;页面，点击&quot;Create Repository&quot;。</li>
<li>选择&quot;Maven (Hosted)&quot;作为仓库类型，并勾选&quot;Support Snapshots&quot;选项，然后按照向导设置仓库的属性。</li>
</ul>
<h2 id="搭建maven私服">搭建Maven私服</h2>
<p>搭建Maven私服有多种选择，其中最常用的是Sonatype Nexus和JFrog Artifactory。在本示例中，我们将使用Sonatype Nexus搭建Maven私服。</p>
<img src="https://jsd.cdn.zzko.cn/gh/VincentAstor/Vincent@master/Maven/image-20230721170020850.png" alt="image-20230721170020850" style="zoom:33%;" />
<h3 id="步骤一下载sonatype-nexus">步骤一：下载Sonatype Nexus</h3>
<p>首先，你需要下载Sonatype Nexus，可以从官方网站下载：https://www.sonatype.com/nexus-repository-oss。</p>
<p>直达链接：https://help.sonatype.com/repomanager3/product-information/download</p>
<h3 id="步骤二安装sonatype-nexus">步骤二：安装Sonatype Nexus</h3>
<p>解压下载的压缩包，并进入解压后的目录。然后，执行以下命令启动Sonatype Nexus：</p>
<pre><code class="language-bash">linux : ./bin/nexus run
windows: nexus.exe /run nexus
</code></pre>
<h3 id="步骤三访问sonatype-nexus控制台">步骤三：访问Sonatype Nexus控制台</h3>
<p>在浏览器中访问 http://localhost:8081，进入Sonatype Nexus控制台。初始访问时，你需要设置管理员密码。然后开启匿名访问。</p>
<h3 id="步骤四配置maven私服">步骤四：配置Maven私服</h3>
<p>登录Sonatype Nexus控制台后，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Maven Repositories&quot;。</p>
<p>在&quot;Maven Repositories&quot;页面，你可以创建和管理私服中的Maven仓库。默认情况下，Sonatype Nexus已经预先配置了几个仓库。</p>
<ul>
<li><strong>maven-central</strong>：中央远程仓库，用于缓存从中央仓库下载的依赖。</li>
<li><strong>maven-public</strong>：用于发布Maven项目的公共仓库。</li>
<li><strong>maven-snapshots</strong>：用于发布快照版本的仓库。</li>
</ul>
<p>你可以根据需要添加新的仓库，例如，创建一个私有仓库用于存储内部项目的依赖。</p>
<h3 id="步骤五配置maven项目使用私服">步骤五：配置Maven项目使用私服</h3>
<p>为了让Maven项目使用你搭建的私服，你需要在项目的<code>pom.xml</code>文件中添加私服的配置。</p>
<pre><code class="language-xml">&lt;project&gt;
    &lt;!-- 其他配置 --&gt;
    
    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;your-repo-id&lt;/id&gt;
            &lt;url&gt;http://your-nexus-url/repository/your-repo-id/&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;
    
    &lt;!-- 其他配置 --&gt;
&lt;/project&gt;
</code></pre>
<p>上述配置中，<code>your-repo-id</code>是你在Sonatype Nexus控制台中创建的仓库ID，<code>http://your-nexus-url/repository/your-repo-id/</code>是你私服的URL地址。</p>
<p>当Maven项目构建时，Maven会从私服中下载依赖，从而加快构建速度并减轻对中央仓库的依赖。</p>
<h3 id="示例代码">示例代码</h3>
<p>下面是一个示例的<code>pom.xml</code>文件，展示了如何配置Maven私服：</p>
<pre><code class="language-xml">&lt;project&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;my-maven-project&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;

    &lt;!-- 配置私服仓库 --&gt;
    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;my-private-repo&lt;/id&gt;
            &lt;url&gt;http://localhost:8081/nexus/repository/my-private-repo/&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;

    &lt;!-- 依赖配置 --&gt;
    &lt;dependencies&gt;
        &lt;!-- 这里可以使用私服的依赖 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.example&lt;/groupId&gt;
            &lt;artifactId&gt;my-private-library&lt;/artifactId&gt;
            &lt;version&gt;1.0.0&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;!-- 其他配置 --&gt;
&lt;/project&gt;
</code></pre>
<p>上述示例中，<code>my-private-repo</code>是在Sonatype Nexus中创建的私有仓库，用于存储<code>my-private-library</code>这个依赖。</p>
<h2 id="nexus基础配置">Nexus基础配置</h2>
<p>当涉及到Nexus的相关配置时，我们将主要关注以下方面：</p>
<ol>
<li>
<p><strong>修改基础配置信息</strong>：包括修改Nexus管理员密码、更改默认端口、配置SSL证书等。</p>
</li>
<li>
<p><strong>修改服务器运行配置信息</strong>：包括调整JVM内存参数、配置运行时用户、更改数据存储位置等。</p>
</li>
<li>
<p><strong>创建和管理Maven仓库</strong>：包括创建代理仓库、托管仓库、组合仓库和快照仓库，以及配置仓库的属性。</p>
</li>
<li>
<p><strong>权限管理和用户配置</strong>：包括创建用户、分配角色和权限，以控制用户对Nexus的访问和操作。</p>
</li>
<li>
<p><strong>仓库访问策略配置</strong>：包括配置代理仓库的缓存策略、设置快照仓库的过期策略等。</p>
</li>
</ol>
<h3 id="修改基础配置信息">修改基础配置信息</h3>
<h4 id="修改nexus管理员密码">修改Nexus管理员密码</h4>
<p>默认情况下，Nexus的管理员账号是<code>admin</code>，密码是<code>admin123</code>。为了增强安全性，我们应该在首次登录后尽快修改管理员密码。</p>
<p>代码实现：在Nexus控制台中修改管理员密码。</p>
<ul>
<li>首次登录Nexus控制台，在页面右上角点击&quot;Sign In&quot;。</li>
<li>登录后，点击页面右上角的用户图标，选择&quot;Change Password&quot;。</li>
<li>输入当前密码和新密码，然后点击&quot;Save&quot;保存修改。</li>
</ul>
<h4 id="更改默认端口">更改默认端口</h4>
<p>Nexus默认使用8081端口进行访问。如果8081端口已经被占用或者你想要更改端口号，可以通过修改配置文件来实现。</p>
<p>代码实现：修改<code>nexus.properties</code>配置文件。</p>
<ul>
<li>打开Nexus安装目录下的<code>nexus.properties</code>文件。</li>
<li>找到并修改以下行，将端口号修改为你想要的端口号：</li>
</ul>
<pre><code class="language-properties">application-port=8081
</code></pre>
<ul>
<li>保存文件，并重新启动Nexus使配置生效。</li>
</ul>
<h4 id="配置ssl证书">配置SSL证书</h4>
<p>如果你想要在Nexus中启用HTTPS，你需要配置SSL证书。</p>
<p>代码实现：在Nexus控制台中配置SSL证书。</p>
<ul>
<li>在Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;General&quot;。</li>
<li>在&quot;General&quot;页面中，找到&quot;SSL&quot;部分，配置SSL证书相关信息。</li>
</ul>
<h3 id="修改服务器运行配置信息">修改服务器运行配置信息</h3>
<h4 id="调整jvm内存参数">调整JVM内存参数</h4>
<p>根据Nexus的使用情况，可能需要调整JVM内存参数，以确保Nexus有足够的内存进行运行。</p>
<p>代码实现：修改<code>nexus.vmoptions</code>文件。</p>
<ul>
<li>打开Nexus安装目录下的<code>bin/nexus.vmoptions</code>文件。</li>
<li>修改以下行来调整JVM内存参数：</li>
</ul>
<pre><code>-Xms2g  # 设置JVM最小内存为2GB
-Xmx4g  # 设置JVM最大内存为4GB
</code></pre>
<ul>
<li>保存文件，并重新启动Nexus使配置生效。</li>
</ul>
<h4 id="配置运行时用户">配置运行时用户</h4>
<p>为了安全性考虑，你可以将Nexus的运行时用户从默认的<code>nexus</code>用户更改为其他用户。</p>
<p>代码实现：修改<code>nexus.rc</code>文件（适用于Linux系统）。</p>
<ul>
<li>打开Nexus安装目录下的<code>bin/nexus.rc</code>文件。</li>
<li>修改以下行来配置运行时用户：</li>
</ul>
<pre><code class="language-bash">run_as_user=&quot;your_user&quot;
</code></pre>
<ul>
<li>将<code>your_user</code>替换为你想要使用的运行时用户。</li>
<li>保存文件，并重新启动Nexus使配置生效。</li>
</ul>
<h4 id="更改数据存储位置">更改数据存储位置</h4>
<p>默认情况下，Nexus的数据存储在Nexus安装目录下的<code>sonatype-work</code>文件夹。你可以将数据存储位置更改为其他路径，以便更好地管理和备份数据。</p>
<p>代码实现：修改<code>nexus.properties</code>配置文件。</p>
<ul>
<li>打开Nexus安装目录下的<code>nexus.properties</code>文件。</li>
<li>找到并修改以下行，将数据存储位置修改为你想要的路径：</li>
</ul>
<pre><code class="language-properties">nexus-work=${bundleBasedir}/../sonatype-work/nexus
</code></pre>
<ul>
<li>
<p>保存文件，并重新启动Nexus使配置生效。</p>
</li>
<li>
<p>当涉及Nexus的配置时，我们已经讨论了修改基础配置信息和服务器运行配置信息。现在，我们将继续讨论创建和管理Maven仓库，以及权限管理和用户配置。</p>
</li>
</ul>
<p>当涉及Nexus的配置时，我们已经讨论了修改基础配置信息和服务器运行配置信息。现在，我们将继续讨论创建和管理Maven仓库，以及权限管理和用户配置。</p>
<h3 id="创建和管理maven仓库">创建和管理Maven仓库</h3>
<h4 id="创建代理仓库">创建代理仓库</h4>
<p>代理仓库充当Nexus与公共中央仓库之间的中间层，可以缓存从公共中央仓库下载的依赖，从而提高构建速度。</p>
<p>代码实现：在Nexus控制台中创建代理仓库。</p>
<ol>
<li>
<p>登录Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Repositories&quot;。</p>
</li>
<li>
<p>在右侧的&quot;Repositories&quot;页面，点击&quot;Create Repository&quot;。</p>
</li>
<li>
<p>选择&quot;Maven (Proxy)&quot;作为仓库类型。</p>
</li>
<li>
<p>按照向导设置代理仓库的属性，包括仓库名称、仓库ID、远程仓库URL等。</p>
</li>
<li>
<p>点击&quot;Create Repository&quot;创建代理仓库。</p>
</li>
</ol>
<h4 id="创建托管仓库">创建托管仓库</h4>
<p>托管仓库用于存储内部开发项目的依赖，允许开发团队发布自己的Maven项目，并供其他项目访问和使用这些依赖。</p>
<p>代码实现：在Nexus控制台中创建托管仓库。</p>
<ol>
<li>
<p>登录Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Repositories&quot;。</p>
</li>
<li>
<p>在右侧的&quot;Repositories&quot;页面，点击&quot;Create Repository&quot;。</p>
</li>
<li>
<p>选择&quot;Maven (Hosted)&quot;作为仓库类型。</p>
</li>
<li>
<p>按照向导设置托管仓库的属性，包括仓库名称、仓库ID等。</p>
</li>
<li>
<p>点击&quot;Create Repository&quot;创建托管仓库。</p>
</li>
</ol>
<h4 id="创建组合仓库">创建组合仓库</h4>
<p>组合仓库是私服中的虚拟仓库，可以将多个实际仓库组合在一起，呈现为单一的仓库。</p>
<p>代码实现：在Nexus控制台中创建组合仓库。</p>
<ol>
<li>
<p>登录Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Repositories&quot;。</p>
</li>
<li>
<p>在右侧的&quot;Repositories&quot;页面，点击&quot;Create Repository&quot;。</p>
</li>
<li>
<p>选择&quot;Maven (Group)&quot;作为仓库类型。</p>
</li>
<li>
<p>按照向导设置组合仓库的属性，包括仓库名称、仓库ID等。</p>
</li>
<li>
<p>在&quot;Member Repositories&quot;部分，选择要包含在组合仓库中的实际仓库。</p>
</li>
<li>
<p>点击&quot;Create Repository&quot;创建组合仓库。</p>
</li>
</ol>
<h4 id="创建快照仓库">创建快照仓库</h4>
<p>快照仓库用于存储项目的快照版本，即开发过程中的不稳定版本。</p>
<p>代码实现：在Nexus控制台中创建快照仓库。</p>
<ol>
<li>
<p>登录Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Repositories&quot;。</p>
</li>
<li>
<p>在右侧的&quot;Repositories&quot;页面，点击&quot;Create Repository&quot;。</p>
</li>
<li>
<p>选择&quot;Maven (Hosted)&quot;作为仓库类型。</p>
</li>
<li>
<p>在向导中勾选&quot;Support Snapshots&quot;选项，表示这是一个快照仓库。</p>
</li>
<li>
<p>按照向导设置快照仓库的属性，包括仓库名称、仓库ID等。</p>
</li>
<li>
<p>点击&quot;Create Repository&quot;创建快照仓库。</p>
</li>
</ol>
<h3 id="权限管理和用户配置">权限管理和用户配置</h3>
<p>权限管理和用户配置允许你控制用户对Nexus的访问和操作。你可以创建用户、分配角色和权限，来限制或开放不同用户的权限。</p>
<p>代码实现：在Nexus控制台中进行权限管理和用户配置。</p>
<ol>
<li>
<p>登录Nexus控制台，点击左侧导航栏的&quot;Security&quot;，然后选择&quot;Users&quot;。</p>
</li>
<li>
<p>在右侧的&quot;Users&quot;页面，点击&quot;Create User&quot;创建新用户。</p>
</li>
<li>
<p>输入用户名和密码，并选择相应的角色。角色决定了用户在Nexus中的权限。</p>
</li>
<li>
<p>点击&quot;Create User&quot;创建用户。</p>
</li>
<li>
<p>在&quot;Roles&quot;页面，你可以定义自定义角色并分配相应的权限。</p>
</li>
<li>
<p>点击&quot;Create Role&quot;创建新角色。</p>
</li>
<li>
<p>为角色指定权限，例如访问特定仓库、发布构件等。</p>
</li>
<li>
<p>将角色分配给相应的用户，以控制其权限。</p>
</li>
</ol>
<h3 id="仓库访问策略配置">仓库访问策略配置</h3>
<p>仓库访问策略配置是指在Nexus中配置不同类型仓库的访问策略，用于控制用户对仓库的访问和使用权限。通过合理设置仓库访问策略，可以确保仓库的安全性和稳定性，同时满足项目的需求。</p>
<p>在Nexus中，主要有以下几种仓库访问策略：</p>
<ol>
<li>代理仓库访问策略</li>
<li>托管仓库访问策略</li>
<li>组合仓库访问策略</li>
<li>快照仓库访问策略</li>
</ol>
<h4 id="代理仓库访问策略">代理仓库访问策略</h4>
<p>代理仓库是用于代理公共中央仓库的中间仓库，通过代理仓库，Nexus可以缓存从公共中央仓库下载的依赖，从而提高构建速度。在配置代理仓库的访问策略时，我们可以设置缓存策略和连接超时等参数。</p>
<p>代码实现：在Nexus控制台中配置代理仓库的访问策略。</p>
<ol>
<li>
<p>登录Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Repositories&quot;。</p>
</li>
<li>
<p>在右侧的&quot;Repositories&quot;页面，找到已创建的代理仓库，点击仓库名称进入详情页。</p>
</li>
<li>
<p>在仓库详情页中，点击&quot;Configuration&quot;选项卡。</p>
</li>
<li>
<p>在&quot;Repository Policy&quot;部分，可以设置缓存策略，如&quot;Always&quot;表示始终缓存远程仓库中的构件，&quot;Never&quot;表示不缓存构件，&quot;Per-Request&quot;表示根据请求缓存构件。</p>
</li>
<li>
<p>在&quot;Connection&quot;部分，可以设置连接超时等参数，确保与远程仓库的通信稳定。</p>
</li>
<li>
<p>完成设置后，点击&quot;Save&quot;保存配置。</p>
</li>
</ol>
<h4 id="托管仓库访问策略">托管仓库访问策略</h4>
<p>托管仓库是用于存储内部开发项目的依赖，可以发布和管理自己的Maven项目。在配置托管仓库的访问策略时，我们可以设置发布策略和删除策略。</p>
<p>代码实现：在Nexus控制台中配置托管仓库的访问策略。</p>
<ol>
<li>
<p>登录Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Repositories&quot;。</p>
</li>
<li>
<p>在右侧的&quot;Repositories&quot;页面，找到已创建的托管仓库，点击仓库名称进入详情页。</p>
</li>
<li>
<p>在仓库详情页中，点击&quot;Configuration&quot;选项卡。</p>
</li>
<li>
<p>在&quot;Repository Policy&quot;部分，可以设置发布策略，如&quot;Allow Redeploy&quot;表示允许覆盖已发布的构件，&quot;Read Only&quot;表示只读模式不允许发布。</p>
</li>
<li>
<p>在&quot;Delete Policy&quot;部分，可以设置删除策略，如&quot;Allow Delete&quot;表示允许删除构件，&quot;Read Only&quot;表示只读模式不允许删除。</p>
</li>
<li>
<p>完成设置后，点击&quot;Save&quot;保存配置。</p>
</li>
</ol>
<h4 id="组合仓库访问策略">组合仓库访问策略</h4>
<p>组合仓库是私服中的虚拟仓库，可以将多个实际仓库组合在一起，呈现为单一的仓库。在配置组合仓库的访问策略时，我们主要关注成员仓库的顺序，即用户在组合仓库中查找构件时会按照顺序依次查找成员仓库。</p>
<p>代码实现：在Nexus控制台中配置组合仓库的访问策略。</p>
<ol>
<li>
<p>登录Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Repositories&quot;。</p>
</li>
<li>
<p>在右侧的&quot;Repositories&quot;页面，找到已创建的组合仓库，点击仓库名称进入详情页。</p>
</li>
<li>
<p>在仓库详情页中，点击&quot;Configuration&quot;选项卡。</p>
</li>
<li>
<p>在&quot;Member Repositories&quot;部分，可以拖动成员仓库来调整它们的顺序。成员仓库的顺序将影响用户查找构件时的查找顺序。</p>
</li>
<li>
<p>完成设置后，点击&quot;Save&quot;保存配置。</p>
</li>
</ol>
<h4 id="快照仓库访问策略">快照仓库访问策略</h4>
<p>快照仓库用于存储项目的快照版本，即开发过程中的不稳定版本。在配置快照仓库的访问策略时，我们可以设置过期策略和清理策略。</p>
<p>代码实现：在Nexus控制台中配置快照仓库的访问策略。</p>
<ol>
<li>
<p>登录Nexus控制台，点击左侧导航栏的&quot;Settings&quot;，然后选择&quot;Repositories&quot;。</p>
</li>
<li>
<p>在右侧的&quot;Repositories&quot;页面，找到已创建的快照仓库，点击仓库名称进入详情页。</p>
</li>
<li>
<p>在仓库详情页中，点击&quot;Configuration&quot;选项卡。</p>
</li>
<li>
<p>在&quot;Repository Policy&quot;部分，可以设置过期策略，如&quot;Keep Forever&quot;表示不过期，&quot;Remove When Released&quot;表示当构件发布后删除快照构件。</p>
</li>
<li>
<p>在&quot;Cleanup&quot;部分，可以设置清理策略，如&quot;Remove If Released&quot;表示当构件发布后删除快照构件，&quot;Remove When More Than N Days Old&quot;表示删除指定天数前的快照构件。</p>
</li>
<li>
<p>完成设置后，点击&quot;Save&quot;保存配置。</p>
</li>
</ol>
<h2 id="资源上传与下载">资源上传与下载</h2>
<h3 id="概述">概述</h3>
<img src="https://jsd.cdn.zzko.cn/gh/VincentAstor/Vincent@master/Maven/image-20230721173504148.png" alt="image-20230721173504148" style="zoom:33%;" />
<h3 id="创建用户与认证">创建用户与认证</h3>
<p>在Nexus中，认证信息通常是通过用户凭据（用户名和密码）来进行身份验证。认证信息的设置涉及到创建用户账号，并为用户赋予相应的权限。接下来，我将详细讲解在Nexus中设置认证信息的步骤，并结合代码实现辅助理解。</p>
<h4 id="设置认证信息步骤">设置认证信息步骤</h4>
<ol>
<li>
<p>登录Nexus控制台：使用管理员账号登录Nexus的Web界面。默认情况下，Nexus的Web控制台地址为：<code>http://your-nexus-server:8081</code>，请根据实际情况替换<code>your-nexus-server</code>为你的Nexus服务器地址。</p>
</li>
<li>
<p>创建用户账号：在Nexus控制台中，点击左侧导航栏的&quot;Security&quot;（安全）选项，然后选择&quot;Users&quot;（用户）。点击&quot;Create User&quot;（创建用户）按钮，填写用户的用户名、密码和邮箱等信息，然后保存。</p>
</li>
<li>
<p>分配角色：在Nexus中，角色用于管理用户的权限。点击左侧导航栏的&quot;Security&quot;（安全）选项，然后选择&quot;Roles&quot;（角色）。选择或创建一个适当的角色，然后将创建的用户添加到该角色中。</p>
</li>
<li>
<p>授权访问：在Nexus控制台中，点击左侧导航栏的&quot;Repository&quot;（仓库）选项，然后选择&quot;Repositories&quot;（仓库）。找到需要进行身份验证的仓库，点击仓库名称进入详情页。在仓库详情页中，点击&quot;Configuration&quot;（配置）选项卡。在&quot;Permissions&quot;（权限）部分，授予相应的角色对该仓库的访问权限。确保赋予用户足够的权限，以便进行上传和下载构件的操作。</p>
</li>
<li>
<p>保存配置：完成上述设置后，点击&quot;Save&quot;（保存）按钮，将认证信息和权限配置保存到Nexus中。</p>
</li>
</ol>
<h4 id="代码实现">代码实现</h4>
<p>假设我们已经在Nexus中创建了一个用户账号，用户名为&quot;myuser&quot;，密码为&quot;mypassword&quot;。并且已经为该用户分配了一个名为&quot;upload-download&quot;的角色，该角色具有上传和下载构件的权限。</p>
<p>下面是使用Maven构建工具时，在<code>pom.xml</code>中配置认证信息的示例代码：</p>
<pre><code class="language-xml">&lt;project&gt;
    &lt;!-- ... --&gt;
    &lt;distributionManagement&gt;
        &lt;repository&gt;
            &lt;id&gt;nexus-releases&lt;/id&gt;
            &lt;url&gt;https://example.com/nexus/repository/releases/&lt;/url&gt;
        &lt;/repository&gt;
        &lt;snapshotRepository&gt;
            &lt;id&gt;nexus-snapshots&lt;/id&gt;
            &lt;url&gt;https://example.com/nexus/repository/snapshots/&lt;/url&gt;
        &lt;/snapshotRepository&gt;
    &lt;/distributionManagement&gt;

    &lt;properties&gt;
        &lt;!-- 设置认证信息 --&gt;
        &lt;nexus.username&gt;myuser&lt;/nexus.username&gt;
        &lt;nexus.password&gt;mypassword&lt;/nexus.password&gt;
    &lt;/properties&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.1.0&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;username&gt;${nexus.username}&lt;/username&gt;
                    &lt;password&gt;${nexus.password}&lt;/password&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.0.0&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;username&gt;${nexus.username}&lt;/username&gt;
                    &lt;password&gt;${nexus.password}&lt;/password&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    &lt;!-- ... --&gt;
&lt;/project&gt;
</code></pre>
<p>在上述示例中，我们在<code>pom.xml</code>中设置了Maven的认证信息，使用<code>nexus.username</code>和<code>nexus.password</code>来指定Nexus的用户名和密码。这样，在执行Maven构建命令时，Maven会使用这些认证信息进行身份验证，以便上传和下载构件。</p>
<blockquote>
<p>小贴士</p>
<ol>
<li>实际应用中，为了安全性考虑，我们通常不会直接在<code>pom.xml</code>中明文存储密码，而是使用Maven的加密功能或其他安全方式来管理密码。</li>
</ol>
</blockquote>
<h3 id="资源上传上传构件">资源上传（上传构件）</h3>
<p>资源上传指将自己的构件发布到私服，以便其他项目可以从私服中下载这些构件。上传构件的过程主要涉及以下步骤：</p>
<ol>
<li>
<p>身份验证：用户首先需要在Nexus上创建账号，并通过身份验证，以获取上传权限。</p>
</li>
<li>
<p>配置Maven项目：在Maven项目的<code>pom.xml</code>中配置私服的URL和认证信息，以便Maven构建工具能够将构件上传到私服。</p>
</li>
<li>
<p>执行构建：通过Maven构建命令将项目构建为构件，并将构件上传到私服。</p>
</li>
</ol>
<h4 id="maven项目配置">Maven项目配置</h4>
<p>在Maven项目的<code>pom.xml</code>文件中添加私服的配置，包括私服的URL和认证信息。</p>
<pre><code class="language-xml">&lt;project&gt;
    &lt;!-- ... --&gt;
    &lt;distributionManagement&gt;
        &lt;repository&gt;
            &lt;id&gt;nexus-releases&lt;/id&gt;
            &lt;url&gt;https://example.com/nexus/repository/releases/&lt;/url&gt;
        &lt;/repository&gt;
        &lt;snapshotRepository&gt;
            &lt;id&gt;nexus-snapshots&lt;/id&gt;
            &lt;url&gt;https://example.com/nexus/repository/snapshots/&lt;/url&gt;
        &lt;/snapshotRepository&gt;
    &lt;/distributionManagement&gt;
    &lt;!-- ... --&gt;
&lt;/project&gt;
</code></pre>
<p>在上述配置中，<code>nexus-releases</code>和<code>nexus-snapshots</code>是私服的ID，<code>https://example.com/nexus/repository/releases/</code>和<code>https://example.com/nexus/repository/snapshots/</code>是私服的URL。</p>
<h4 id="上传构件">上传构件</h4>
<p>使用Maven构建命令上传构件到私服。</p>
<pre><code class="language-bash"># 上传正式版构件
mvn deploy

# 上传快照版构件
mvn deploy -Dmaven.deploy.snapshot=true
</code></pre>
<p>执行以上命令后，Maven会将构件上传到私服中相应的仓库，正式版构件上传到<code>nexus-releases</code>，快照版构件上传到<code>nexus-snapshots</code>。</p>
<h3 id="资源下载下载构件">资源下载（下载构件）</h3>
<p>资源下载指从私服中获取所需的构件，以便在项目中使用。下载构件的过程主要涉及以下步骤：</p>
<ol>
<li>
<p>身份验证：用户需要在Nexus上创建账号，并通过身份验证，以获取下载权限。</p>
</li>
<li>
<p>配置Maven项目：在Maven项目的<code>pom.xml</code>中配置私服的URL和认证信息，以便Maven构建工具能够从私服中下载构件。</p>
</li>
<li>
<p>执行构建：通过Maven构建命令将项目构建，Maven会从私服中下载所需的构件。</p>
</li>
</ol>
<h4 id="maven项目配置-2">Maven项目配置</h4>
<p>在Maven项目的<code>pom.xml</code>文件中添加私服的配置，包括私服的URL和认证信息，与资源上传时的配置类似。</p>
<pre><code class="language-xml">&lt;project&gt;
    &lt;!-- ... --&gt;
    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;nexus-releases&lt;/id&gt;
            &lt;url&gt;https://example.com/nexus/repository/releases/&lt;/url&gt;
        &lt;/repository&gt;
        &lt;repository&gt;
            &lt;id&gt;nexus-snapshots&lt;/id&gt;
            &lt;url&gt;https://example.com/nexus/repository/snapshots/&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;
    &lt;!-- ... --&gt;
&lt;/project&gt;
</code></pre>
<p>在上述配置中，我们定义了两个仓库：<code>nexus-releases</code>用于下载正式版构件，<code>nexus-snapshots</code>用于下载快照版构件。请根据实际情况进行替换。</p>
<h4 id="下载构件">下载构件</h4>
<p>当我们执行Maven构建命令时，Maven会自动从私服中下载所需的构件。</p>
<pre><code class="language-bash">mvn clean install
</code></pre>
<p>在上述命令中，Maven会从私服中下载依赖的构件，并将项目构建为可执行文件。</p>
<blockquote>
<p>小贴士</p>
<ol>
<li>在进行资源下载前，确保正确配置了私服的URL和认证信息，这样才能顺利下载私服中的构件。</li>
</ol>
</blockquote>

            </div>
            
              <div class="reward-btn">
                <div class="reward-btn-text">赞赏</div>
              </div>
            
            
              <div class="post-footer">
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong class="language" data-lan="author">本文作者：</strong>
      RiftRays
    </li>
    <li class="post-copyright-link">
      <strong class="language" data-lan="link">本文链接：</strong>
      <a href="https://riftrays.github.io/6Dq1YTrSe/" title="SonatypeNexus">https://riftrays.github.io/6Dq1YTrSe/</a>
    </li>
    <li class="post-copyright-license">
      <strong class="language" data-lan="copyright">版权声明： </strong>
      本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！
    </li>
  </ul>
  <div class="tags">
    
      <a href="https://riftrays.github.io/tag-Maven/"># Maven</a>
    
  </div>
  <div class="nav">
    <div class="nav-prev">
      
    </div>
    <div class="nav-next">
      
        <a class="nav-pc-next" title="Maven 进阶" href="https://riftrays.github.io/MavenAdvanced/">Maven 进阶</a>
        <a class="nav-mobile-next" title="Maven 进阶" href="https://riftrays.github.io/MavenAdvanced/">下一篇</a>
        <i class="fa fa-chevron-right"></i>
      
    </div>
  </div>
</div>
            
            
  

          </div>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <center id="runTimeBox">
      已运行:<span id="run_time"></span>
    </center>
    <span id="busuanzi_container_site_pv">浏览数:<span id="busuanzi_value_site_pv"></span> 次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">访客数:<span id="busuanzi_value_site_uv"></span> 人</span>

    <script>
      BirthDay = new Date('2019/01/01');
      if (BirthDay.getTime()) {
        function runTime() {
          str = "";
          today = new Date();
          timeold = today.getTime() - BirthDay.getTime();
          msPerDay = 24 * 60 * 60 * 1000;
          e_daysold = timeold / msPerDay;
          daysold = Math.floor(e_daysold);
          str += daysold + "天";
          return str;
        }
        setInterval(function () {
          $("#run_time").html(runTime());
        }, 1000);
      } else {
        document.querySelector('.footer').removeChild(document.querySelector('#runTimeBox'));
      }
    </script>
    <div class="poweredby">
      Your time is limited, so don't waste it living someone else's life ... Stay Hungry. Stay Foolish.
    </div>
  </footer>
  
    
        <div class="pisces back-to-top" id="back_to_top">
          <i class="fa fa-arrow-up"></i>
          
            <span class="scrollpercent"> <span id="back_to_top_text">0</span>% </span>
            
        </div>
        
          
            
              <div class="bg-img">
                <img src="https://cdn.jsdelivr.net/gh/VincentAstor/Vincent@master/Blog/30_Throne2_1_4k.jpg" />
              </div>
              
                
                  
                        
</div>
<script>
  let sideBarOpen = "sidebar-open";
  let body = document.body;
  let back2Top = document.querySelector("#back_to_top"),
    back2TopText = document.querySelector("#back_to_top_text"),
    drawerBox = document.querySelector("#drawer_box"),
    rightSideBar = document.querySelector(".sidebar"),
    viewport = document.querySelector("body");

  function scrollAnimation(currentY, targetY) {
    let needScrollTop = targetY - currentY;
    let _currentY = currentY;
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10);
      _currentY += dist;
      window.scrollTo(_currentY, currentY);
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY);
      } else {
        window.scrollTo(_currentY, targetY);
      }
    }, 1);
  }

  back2Top.addEventListener("click", function (e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });

  window.addEventListener("scroll", function (e) {
    let percent =
      (document.scrollingElement.scrollTop /
        (document.scrollingElement.scrollHeight -
          document.scrollingElement.clientHeight)) *
      100;
    if (percent > 1 && !back2Top.classList.contains("back-top-active")) {
      back2Top.classList.add("back-top-active");
    }
    if (percent == 0) {
      back2Top.classList.remove("back-top-active");
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });

  let hasCacu = false;
  window.addEventListener("resize", function (e) {
    calcuHeight();
  });

  function calcuHeight() {
    // 动态调整站点概览高度
    if (
      (!hasCacu && back2Top.classList.contains("pisces")) ||
      back2Top.classList.contains("gemini")
    ) {
      let sideBar = document.querySelector(".sidebar");
      let navUl = document.querySelector("#site_nav");
      sideBar.style =
        "margin-top:" + (navUl.offsetHeight + navUl.offsetTop + 15) + "px;";
      hasCacu = true;
    }
  }
  calcuHeight();

  let open = false,
    MOTION_TIME = 300,
    RIGHT_MOVE_DIS = "320px";

  if (drawerBox) {
    let rightMotions = document.querySelectorAll(".right-motion");
    let right = drawerBox.classList.contains("right");

    let transitionDir = right
      ? "transition.slideRightIn"
      : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS,
      };
      closeProp = {
        paddingRight: "0px",
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS,
      };
      closeProp = {
        paddingLeft: "0px",
      };
    }

    drawerBox.onclick = function () {
      open = !open;
      jQuery.Velocity(rightSideBar, "stop");
      jQuery.Velocity(viewport, "stop");
      jQuery.Velocity(rightMotions, "stop");
      if (open) {
        jQuery.Velocity(
          rightSideBar,
          {
            width: RIGHT_MOVE_DIS,
          },
          {
            duration: MOTION_TIME,
            begin: function () {
              jQuery.Velocity(rightMotions, transitionDir, {});
            },
          }
        );
        jQuery.Velocity(viewport, openProp, {
          duration: MOTION_TIME,
        });
      } else {
        jQuery.Velocity(
          rightSideBar,
          {
            width: "0px",
          },
          {
            duration: MOTION_TIME,
            begin: function () {
              jQuery.Velocity(rightMotions, {
                opacity: 0,
              });
            },
          }
        );
        jQuery.Velocity(viewport, closeProp, {
          duration: MOTION_TIME,
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle("muse-line");
      }
      drawerBox.classList.toggle(sideBarOpen);
    };
  }

  // 链接跳转
  let newWindow = "false";
  if (newWindow === "true") {
    let links = document.querySelectorAll(".post-body a");
    links.forEach((item) => {
      if (!item.classList.contains("btn")) {
        item.setAttribute("target", "_blank");
      }
    });
  }

  // 代码高亮
  hljs.initHighlightingOnLoad();

  // 离开当前页title变化
  var leaveTitle = "😭菜~请给个机会~拜托了！";
  var normal_title = document.title;
  if (leaveTitle) {
    document.addEventListener("visibilitychange", function () {
      if (document.visibilityState == "hidden") {
        normal_title = document.title;
        document.title = leaveTitle;
      } else {
        document.title = normal_title;
      }
    });
  }
</script>

<link rel="stylesheet" href="/media/css/jquery.fancybox.css" />
<script src="/media/js/jquery.fancybox.js"></script>

<script>
  let images = document.querySelectorAll(".section img");
  images.forEach((image) => {
    var parent = image.parentElement;
    var next = image.nextElementSibling;
    parent.removeChild(image);
    var aelem = document.createElement("a");
    aelem.href = image.src;
    aelem.dataset["fancybox"] = "images";
    aelem.dataset["rel"] = "fancybox-button";
    aelem.classList.add("fancybox");
    aelem.appendChild(image);
    parent.insertBefore(aelem, next);
  });
</script>
    <div class="reward-mask" style="display: none;">
  <div class="reward-relative">
    <span class="close" aria-hidden="true">x</span>
    <div class="reward-body">
      <h2>感谢您的支持，我会继续努力的!</h2>
      <div class="reward-img-box">
        <div style="position: relative; width: 140px; height: 140px;">
          
          
            <img id="zfb" class="reward-img" src="https://cdn.jsdelivr.net/gh/VincentAstor/Vincent@master/Blog/1689773094686.jpg" alt="赞赏码">
          
          
            <img id="wx" class="reward-img" src="https://cdn.jsdelivr.net/gh/VincentAstor/Vincent@master/Blog/mm_facetoface_collect_qrcode_1689773482372.jpg" alt="赞赏码">
          
        </div>
      </div>
      <p class="reward-word">扫码打赏，你说多少就多少</p>
      <p class="reward-tip"> 多多打赏~鼓励作者更多原创内容！</p>
    </div>
    <div class="bottom">
      
      <div id="zfbBtn" class="pay-text">
        支付宝
      </div>
      
      
      <div id="wxBtn" class="pay-text">
        微信支付
      </div>
      
    </div>
  </div>
</div>
<style>
  .reward-mask {
    position: fixed;
    z-index: 99999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #00000054;
  }

  .reward-relative {
    position: relative;
    width: 480px;
    text-align: center;
    margin: 0 auto;
    border-radius: 5px;
    background-color: #fff;
    top: 50%;
    margin-top: -205px;
  }

  .reward-relative .close {
    position: absolute;
    right: 10px;
    font-weight: normal;
    font-size: 16px;
    color: #929292;
  }

  .reward-body {
    padding: 40px 20px 20px;
  }

  .bottom {
    display: flex;
  }

  .reward-btn {
    text-align: center;
  }

  .reward-btn-text {
    display: inline-block;
    cursor: pointer;
    width: 60px;
    height: 60px;
    line-height: 60px;
    border-radius: 50%;
    background-color: #ff9734;
    color: #FFF;
    margin-top: 20px;
  }

  .pay-text {
    margin-top: 10px;
    padding: 10px;
    flex: 1;
    transition: all .2s linear;
  }

  .pay-text:hover {
    background-color: #a5a5a536;
  }

  .reward-body h2 {
    padding-top: 10px;
    text-align: center;
    color: #a3a3a3;
    font-size: 16px;
    font-weight: normal;
    margin: 0 0 20px;
  }

  .reward-body h2:after,
  .reward-body h2:before {
    font-family: Arial, Helvetica, sans-serif;
    background: 0 0;
    width: 0;
    height: 0;
    font-style: normal;
    color: #eee;
    font-size: 80px;
    position: absolute;
    top: 20px;
  }

  .reward-body h2:before {
    content: '\201c';
    left: 50px;
  }

  .reward-body h2:after {
    content: '\201d';
    right: 80px;
  }

  .reward-img-box {
    display: inline-block;
    padding: 10px;
    border: 6px solid #ea5f00;
    margin: 0 auto;
    border-radius: 3px;
    position: relative;
  }

  .reward-img {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
  }

  @media (max-width: 767px) {
    .reward-relative {
      height: 100%;
      top: 0px;
      margin-top: 0;
      width: auto;
    }

    .reward-relative .bottom {
      flex-direction: column;
    }

    .reward-relative .pay-text {
      width: 80%;
      margin: 5px auto;
      border: 1px solid silver;
      padding: 6px;
      border-radius: 4px;
    }

    .reward-body h2:after {
      right: 40px;
    }

    .reward-body h2:after,
    .reward-body h2:before {
      font-size: 60px;
    }

    .reward-body h2:before {
      left: 20px;
    }
  }
</style>
<script>
  !function () {
    var mask = document.querySelector('.reward-mask');
    let close = document.querySelector('.reward-relative .close');
    let rewardBtn = document.querySelector('.reward-btn');

    let zfb = document.querySelector('#zfb'),
      wx = document.querySelector('#wx'),
      zfbBtn = document.querySelector('#zfbBtn'),
      wxBtn = document.querySelector('#wxBtn');

    if (zfbBtn && wxBtn) {
      zfbBtn.addEventListener('click', () => {
        jQuery.Velocity(zfb, 'transition.slideLeftIn', {
          duration: 400
        });
        jQuery.Velocity(wx, 'transition.slideRightOut', {
          display: 'none',
          duration: 400
        });
      });

      wxBtn.addEventListener('click', () => {
        jQuery.Velocity(wx, 'transition.slideRightIn', {
          duration: 400
        });
        jQuery.Velocity(zfb, 'transition.slideLeftOut', {
          display: 'none',
          duration: 400
        });
      });
    }

    rewardBtn.addEventListener('click', (e) => {
      jQuery.Velocity(mask, 'transition.slideDownIn', {
        duration: 400
      })
    });

    close.addEventListener('click', (e) => {
      e.preventDefault();
      jQuery.Velocity(mask, 'transition.slideUpOut', {
        duration: 400
      })
    })
  }()
</script>

  </div>
</body>
<input hidden id="copy" />
<script>
  !function () {
    let times = document.querySelectorAll('.publish-time');
    for (let i = 0; i < times.length; i++) {
      let date = times[i].dataset.t;
      let time = Math.floor((new Date().getTime() - new Date(date).getTime()) / 1000);
      if (time < 60) {
        str = time + '秒之前';
      } else if (time < 3600) {
        str = Math.floor(time / 60) + '分钟之前';
      } else if (time >= 3600 && time < 86400) {
        str = Math.floor(time / 3600) + '小时之前';
      } else if (time >= 86400 && time < 259200) {
        str = Math.floor(time / 86400) + '天之前';
      } else {
        str = times[i].textContent;
      }
      times[i].textContent = str;
    }
  }();
</script>

<script>
  let language = '';
  if (language !== '') {
    let map = new Map();
    if (language === 'en') {
      map.set('search', 'Search');
      map.set('category', 'Categories');
      map.set('article', 'Articles');
      map.set('tag', 'Tags');
      map.set('top', 'Top');
      map.set('publish', 'published');
      map.set('minute', ' minutes');
      map.set('read-more', 'Read More');
      map.set('view', 'View');
      map.set('words', ' words');
      map.set('category-in', 'category in');
      map.set('preview', 'Meta');
      map.set('index', 'Toc');
      map.set('no-archives', "You haven't created yet");
      map.set('archives', " articles in total");
      map.set('cloud-tags', " tags in total");
      map.set('copyright', "Copyright: ");
      map.set('author', "Author: ");
      map.set('link', "Link: ");
      map.set('leave-message', "Leave a message");
      map.set('format', "Links Format");
      map.set('site-name', "Name: ");
      map.set('site-link', "Link: ");
      map.set('site-desc', "Desc: ");
      map.set('stat', " related results, taking ");
      map.set('stat-time', " ms");
      map.set('site-img', "Image: ");
    }

    if (map.size > 0) {
      let lanElems = document.querySelectorAll('.language');
      lanElems.forEach(elem => {
        let lan = elem.dataset.lan, text = map.get(lan);
        if (elem.__proto__ === HTMLInputElement.prototype) {
          elem.placeholder = text
        } else {
          if (elem.dataset.count) {
            text = elem.dataset.count + text;
          }
          elem.textContent = text;
        }
      })
    }
  }

  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // 判断是不是ios端
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //创建文本元素
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //选择内容
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //复制到剪贴板
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("复制错误！请手动复制！")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === '复制成功') {
        return;
      }
      e.srcElement.textContent = '复制成功';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === '复制成功') {
            elem.textContent = '复制代码'
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = '复制代码';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })

</script>
<script src="/media/js/motion.js"></script>


  <script
    src="https://jsdelivr.codeqihan.com/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
  <script>
    var scroll = new SmoothScroll('a[href*="#"]', {
      speed: 200
    });
  </script>



<script src="/media/js/mouse/peace.js"></script>


  <script src="/media/js/cool.js"></script>



  <div class="snow-container"></div>
  <script color="0,205,205" pointer-events="auto" zIndex="-1" opacity='0.7' count="99" src="/media/js/bg/canvas-nest.js"></script>

</html>